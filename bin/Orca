#!/bin/bash
# Orca Engine Launcher - Always uses the app bundle for proper dock icon

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
APP_PATH="$SCRIPT_DIR/Orca.app"
EXECUTABLE="$APP_PATH/Contents/MacOS/Orca"

if [ ! -d "$APP_PATH" ]; then
    echo "Error: Orca.app not found at $APP_PATH"
    exit 1
fi

# If no arguments or need GUI, use open for proper dock icon
if [ $# -eq 0 ]; then
    # Launch with proper dock icon using open
    open "$APP_PATH"
else
    # Check if it's a command-line only operation (like --version, --help)
    case "$1" in
        --version|--help|-v|-h)
            # Run directly for command-line output
            "$EXECUTABLE" "$@"
            ;;
        *)
            # Launch with open and pass files/projects as arguments
            open "$APP_PATH" --args "$@"
            ;;
    esac
fi
